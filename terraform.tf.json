{
  "terraform": [
    {
      "required_providers": [
        {
          "aws": {
            "source": "hashicorp/aws",
            "version": ">= 2.7.0"
          }
        }
      ]
    }
  ],
  "provider": [
    {
      "aws": [
        {
          "region": "us-west-2"
        }
      ]
    }
  ],
  "resource": [
    {
      "aws_s3_bucket": [
        {
          "terraform_backend_bucket": [
            {
              "bucket": "terraform-state-dwu04i5b0p5v4s1v2t7b670v1mp1rptd3ik1gw567hdul"
            }
          ]
        }
      ]
    },
    {
      "aws_instance": [
        {
          "test": [
            {
              "ami": "ami-0892d3c7ee96c0bf7",
              "instance_type": "t2.medium"
            }
          ]
        }
      ]
    },
    [
      {
        "aws_iam_user": [
          {
            "test_iam": [
              {
                "name": "test_iam"
              }
            ]
          }
        ]
      },
      {
        "aws_iam_user_policy_attachment": [
          {
            "test_iam_policy_attachment0": [
              {
                "user": "${aws_iam_user.test_iam.name}",
                "policy_arn": "${aws_iam_policy.test_policy_document.arn}"
              }
            ]
          }
        ]
      },
      {
        "aws_iam_access_key": [
          {
            "test_iam_access_key": [
              {
                "user": "${aws_iam_user.test_iam.name}"
              }
            ]
          }
        ]
      }
    ],
    {
      "aws_instance": [
        {
          "test": [
            {
              "ami": "ami-0892d3c7ee96c0bf7",
              "instance_type": "t2.medium"
            }
          ]
        }
      ]
    },
    [
      {
        "aws_iam_user": [
          {
            "test_iam": [
              {
                "name": "test_iam"
              }
            ]
          }
        ]
      },
      {
        "aws_iam_user_policy_attachment": [
          {
            "test_iam_policy_attachment0": [
              {
                "user": "${aws_iam_user.test_iam.name}",
                "policy_arn": "${aws_iam_policy.test_policy_document.arn}"
              }
            ]
          }
        ]
      },
      {
        "aws_iam_access_key": [
          {
            "test_iam_access_key": [
              {
                "user": "${aws_iam_user.test_iam.name}"
              }
            ]
          }
        ]
      }
    ]
  ],
  "data": [
    {
      "aws_iam_policy_document": [
        {
          "test_policy_document": [
            {
              "statement": [
                {
                  "actions": [
                    "ec2:RunInstances",
                    "ec2:AssociateIamInstanceProfile",
                    "ec2:ReplaceIamInstanceProfileAssociation"
                  ],
                  "effect": "Allow",
                  "resources": [
                    "arn:aws:ec2:::*"
                  ]
                },
                {
                  "actions": [
                    "iam:PassRole"
                  ],
                  "effect": "Allow",
                  "resources": [
                    "${aws_instance.test.arn}"
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "aws_iam_policy_document": [
        {
          "test_policy_document": [
            {
              "statement": [
                {
                  "actions": [
                    "ec2:RunInstances",
                    "ec2:AssociateIamInstanceProfile",
                    "ec2:ReplaceIamInstanceProfileAssociation"
                  ],
                  "effect": "Allow",
                  "resources": [
                    "arn:aws:ec2:::*"
                  ]
                },
                {
                  "actions": [
                    "iam:PassRole"
                  ],
                  "effect": "Allow",
                  "resources": [
                    "${aws_instance.test.arn}"
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
