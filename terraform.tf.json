{
  "terraform": [
    {
      "required_providers": [
        {
          "aws": {
            "source": "hashicorp/aws",
            "version": ">= 2.7.0"
          }
        }
      ]
    }
  ],
  "provider": [
    {
      "aws": [
        {
          "region": "us-west-2"
        }
      ]
    }
  ],
  "resource": [
    {
      "aws_s3_bucket": [
        {
          "terraform_backend_bucket": [
            {
              "bucket": "terraform-state-tqedq01gw0o8tqosxmlm9v57w0qbg62qjzh0yvo3o3xpw"
            }
          ]
        }
      ]
    },
    {
      "aws_instance": [
        {
          "myinstance": [
            {
              "ami": "ami-0892d3c7ee96c0bf7",
              "instance_type": "t2.medium"
            }
          ]
        }
      ]
    },
    {
      "aws_iam_user": [
        {
          "myinstance_iam": [
            {
              "name": "myinstance_iam"
            }
          ]
        }
      ]
    },
    {
      "aws_iam_user_policy_attachment": [
        {
          "myinstance_iam_policy_attachment0": [
            {
              "user": "${aws_iam_user.myinstance_iam.name}",
              "policy_arn": "${aws_iam_policy.myinstance_iam_policy0.arn}"
            }
          ]
        }
      ]
    },
    {
      "aws_iam_policy": [
        {
          "myinstance_iam_policy0": [
            {
              "name": "myinstance_iam_policy0",
              "path": "/",
              "policy": "${data.aws_iam_policy_document.myinstance_iam_policy_document.json}"
            }
          ]
        }
      ]
    },
    {
      "aws_iam_access_key": [
        {
          "myinstance_iam_access_key": [
            {
              "user": "${aws_iam_user.myinstance_iam.name}"
            }
          ]
        }
      ]
    }
  ],
  "data": [
    {
      "aws_iam_policy_document": [
        {
          "myinstance_iam_policy_document": [
            {
              "statement": [
                {
                  "actions": [
                    "ec2:RunInstances",
                    "ec2:AssociateIamInstanceProfile",
                    "ec2:ReplaceIamInstanceProfileAssociation"
                  ],
                  "effect": "Allow",
                  "resources": [
                    "arn:aws:ec2:::*"
                  ]
                },
                {
                  "actions": [
                    "iam:PassRole"
                  ],
                  "effect": "Allow",
                  "resources": [
                    "${aws_instance.myinstance.arn}"
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
